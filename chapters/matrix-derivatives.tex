% !Mode:: "TeX:UTF-8"
\chapter{Matrix Derivatives}
\label{cpt:app-B}
First, the derivation of a scalar function to a scalar variable is obvious. Suppose a function $f(x)$ takes the derivative of $x$, then a derivative like $\frac{\mathrm{d}f}{\mathrm{d}x}$ will be obtained, which is obviously still a scalar. Below we discuss the cases when $x$ is a vector and $f$ is a vector function.

\section{Scalar Function with Vector Variable}
Suppose $\mathbf{x} \in \mathbb{R}^m$ is a column vector, then we have:
\begin{equation}
	\frac{{\mathrm{d}f}}{{\mathrm{d}\mathbf{x}}} = {\left[ {\frac{{\mathrm{d}f}}{{\mathrm{d}{x_1}}}, \cdots ,\frac{{\mathrm{d}f}}{{\mathrm{d}{x_m}}}} \right]^T} \in {\mathbb{R}^m}.
\end{equation}
The result is a $m \times 1$ vector. In some documents we may write the denominator as $\mathbf{x}^T$:
\begin{equation}
	\frac{{\mathrm{d}f}}{{\mathrm{d}\mathbf{x}^T}} =  {\left[ {\frac{{\mathrm{d}f}}{{\mathrm{d}{x_1}}}, \cdots ,\frac{{\mathrm{d}f}}{{\mathrm{d}{x_m}}}} \right]}.
\end{equation}
The result is a row vector. We usually call $\frac{\mathrm{d}f}{\mathrm{d}\mathbf{x}}$ as gradient or Jacobian. But it should be noted that the name or manner is not exactly same in different fields.

\section{Vector Function with Vector Variable}
We may also take the derivative with a vector function to a vector variable. Consider a vector function $\mathbf{F}(\mathbf{x})$ like: $$\mathbf{F}(\mathbf{x}) = [f_1(\mathbf{x}), \cdots, f_n(\mathbf{x})]^T,$$ where each $f_k$ is a scalar function of $\mathbf{x}$. When taking derivative of $\mathbf{x}$, we usually write it as: 
\begin{equation}
	\frac{{\partial \mathbf{F}}}{{\partial {\mathbf{x}^T}}} = \left[ {\begin{array}{*{20}{c}}
			{\frac{{\partial {f_1}}}{{\partial {\mathbf{x}^T}}}}\\
			\vdots \\
			{\frac{{\partial {f_n}}}{{\partial {\mathbf{x}^T}}}}
	\end{array}} \right] = \left[ {\begin{array}{*{20}{c}}
			{\frac{{\partial {f_1}}}{{\partial {x_1}}}}&{\frac{{\partial {f_1}}}{{\partial {x_2}}}}& \cdots &{\frac{{\partial {f_1}}}{{\partial {x_m}}}}\\
			{\frac{{\partial {f_2}}}{{\partial {x_1}}}}&{\frac{{\partial {f_2}}}{{\partial {x_2}}}}& \cdots &{\frac{{\partial {f_2}}}{{\partial {x_m}}}}\\
			\vdots & \vdots & \ddots & \vdots \\
			{\frac{{\partial {f_n}}}{{\partial {x_1}}}}&{\frac{{\partial {f_n}}}{{\partial {x_2}}}}& \cdots &{\frac{{\partial {f_n}}}{{\partial {x_m}}}}
	\end{array}} \right] \in {\mathbb{R}^{n \times m}}ï¼Œ
\end{equation}
which is a column vector function to a row vector variable. Then we get a $n \times m$ Jacobian matrix. Such writing style is standardized. We may write the derivative as: 
\begin{equation}
	\frac{\partial \mathbf{Ax}} {\partial\mathbf{x}^T} = \mathbf{A},
\end{equation}
or a row vector function to a column vector variable, and the result is transposed: 
\begin{equation}
	\frac{{\partial \mathbf{F}}^T}{{\partial {\mathbf{x}}}}  = \left(\frac{{\partial \mathbf{F}}}{{\partial {\mathbf{x}^T}}} \right)^ \mathrm{T}.
\end{equation}

In this book we use the former definition by default. However, this writing style requires adding an extra transpose operator in the denominator of each equation, which is inconvenient if we have to write a lot of derivatives. So without ambiguity, we relax the notation by omitting the transpose operator like this: 
\begin{equation}
	\frac{\partial \mathbf{Ax}} {\partial\mathbf{x}} = \mathbf{A},
\end{equation}
which makes the notation more natural. 
